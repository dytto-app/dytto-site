# Netlify configuration for Dytto landing site
# Fix #10: Remove all force-redirect nonsense.
# robots.txt and sitemap.xml exist in public/ → Vite copies to dist/ → Netlify serves directly.
# The /* SPA wildcard WITHOUT force=true does NOT override existing static files.
# Simpler is better. Stop fighting Netlify.

[build]
  command = "npm run build"
  publish = "dist"

# Headers for static SEO files
[[headers]]
  for = "/robots.txt"
  [headers.values]
    Content-Type = "text/plain; charset=utf-8"
    Cache-Control = "public, max-age=3600"

[[headers]]
  for = "/sitemap.xml"
  [headers.values]
    Content-Type = "application/xml; charset=utf-8"
    Cache-Control = "public, max-age=3600"

# Headers for .well-known
[[headers]]
  for = "/.well-known/*"
  [headers.values]
    Content-Type = "application/json"
    Access-Control-Allow-Origin = "*"

# SPA routing - catch all for client-side routing
# NO force=true here — static files like robots.txt/sitemap.xml are served directly
[[redirects]]
  from = "/*"
  to = "/index.html"
  status = 200
